# HTTP의 속도문제

## HTTP의 단점

HTTP 의 경우 원래 HTML 기반의 텍스트 데이터를 주고 받기 위해 만들어졌었다. 그런데 시대가 변하면서 각종 다양한 데이터를 주고받게 되면서 성능면에서 효율이 매우 떨어지게 되었다. 그 이유는 아래와 같다.

* 1개의 커넥션으로 1개의 리퀘스트만 보낼 수 있다.
* 리퀘스트는 클라이언트만 가능하고 리퀘스트 없는 리스폰스는 불가능하다.
* 헤더는 압축되지 않아 헤더 정보가 많으면 지연이 심해진다.
* 헤더가 길고 중복되는 경우가 많다.
* 데이터 압축이 강제되지 않는다.

이러한 문제들 덕분에 자원의 낭비가 발생하여 속도가 느려지게 된다.

## 여러 해결책들

### AJAX에 의한 해결

XML을 이용한(현재는 JSON) 비동기 통신이다. 기존의 통신의 경우 페이지의 전체를 모두 받아오는 방식이기 때문에 문제가 있는데, 비동기 방식의 경우 일부분만 갱신할 수 있기 때문에 자원의 낭비를 줄일 수 있다. 그러나 AJAX통신의 경우 실시간으로 정보를 취득하려고하면 대량의 리퀘스트가 발생하는 문제와, HTTP 자체의 문제는 해결할 수 없다.

### Comet

comet은 서버의 리소스 갱신이 있다면, 리퀘스트 없이 리스폰스를 줄 수 있는 방식이다. 서버 푸시 기능을 유사하게 만들 수 있다. 보통 리퀘스트가 오면 리스폰스를 바로 반환하지만 comet은 리스폰스를 보류로 두고, 콘텐츠가 갱신되면 리스폰스를 반환하는 것이다. 그런데 이 역시 근본적인 해결책은 아니다. 또한 리스폰스를 보류하기 때문에 커넥션의 시간이 길어진다.

### SPDY

구글에서 2010년에 발표한 기술로 SSL과 HTTP사이에 SPDY를 넣는 방식이다. 이 기능을 사용하면 단일 TCP접속으로 복수의 HTTP리퀘스트를 받을 수 있게 만든다. 따라서 다중 스트림이 가능하다. 한 번의 연결로 여러개의 리퀘스트를 받는다. 또한 리퀘스트의 우선순위 부여가 가능하며, 헤더압축, 서버푸시, 서버힌트(리퀘스트 할 리소스를 제안)의 기능이 있다.

그러나 실제 웹 사이트에서는 많이 사용하지 않는데, 한 개의 도메인과의 통신만 다중화 하기 때문에 복수의 도메인으로 리소스를 사용한다면 효과가 없는 한계가 있기 때문이다.

#### 참고자료

그림으로 배우는 Http Network Basic, 우에노 센, 이병억 옮김, 영진닷컴

