# Content Negotiation

## 정의

같은 콘텐츠지만 여러개의 다른 버전의 페이지를 지닌 웹 페이지가 있을 수 있습니다. 예를 들어 내용은 같지만 영어판과 한국어판의 언어만 다른 경우입니다. 이러한 경우 브라우저의 언어 버전에 따라 request를 다르게 보내 다른 콘텐츠를 가져오게 됩니다. 이를 컨텐츠 네고시에이션이라고 합니다. 즉 브라우저와 서버가 타협해서 가장 알맞는 자원을 주는 것을 말합니다.

## 판단 기준

컨텐츠 네고시에이션을 할 때 클라이언트에게 어느것이 적합할 지 판단하는 기준이 있어야합니다. 이 클라이언트가 영문판을 원하는지, 한글어판을 원하는지를 판단해야 하는데 이는 request의 request header에서 이루어집니다. 

* Accept
* Accept-Charset
* Accept-Encoding
* Accept-Language
* Content-Language(엔터티헤더)

request header의 이러한 부분들을 이용해서 컨텐츠를 판단합니다.

```http
Accept-Language: ko-kr, en-us
```

와 같이 request가 온다면 한국어판 리소스를 보내주면 되는 것입니다.

## 유형

세가지 방식이 존재합니다. 서버측, 클라이언트측, 양측 합의입니다.

### Server-driven Negotiation

서버측에서 네고시에이션을 합니다. 서버측에서 리퀘스트 헤더필드의 정보의 판단기준들을 가져와 자동으로 처리하는 방식입니다. 다만 브라우저가 보낸 정보를 가지고 판단하기 때문에 정말로 유저가 원하는 정보인지는 확신할 수 없습니다.

### Agent-driven Negotiation

클라이언트 측에서 네고시에이션을 하는 방식입니다. 예를들어 브라우저에 표시된 선택지 중에서 유저가 수동으로 선택하는 방식입니다. javascript를 이용하여 OS의 종류에 따라 PC용과 스마트폰용 웹페이지를 자동으로 전환하는 것과 같은 방식입니다.

###Transparent Negotiation

위 두가지를 혼합한 방식으로 각각 네고시에이션을 실시합니다



#### 참고자료

그림으로 배우는 Http Network Basic, 우에노 센, 이병억 옮김, 영진닷컴

